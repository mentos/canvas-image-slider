{"version":3,"sources":["src/slides.js","src/index.js"],"names":["height","id","url","width","CANVAS_ID","DIRECTION","Left","Right","$canvas","document","getElementById","$ctx","getContext","loadedImages","stage","canvas","canDrag","direction","dragStartX","dx","isDragging","isMousePressed","bindMouseEvents","init","$el","addEventListener","event","style","cursor","x","newDx","newDirextion","draw","t","clearCanvas","slides","forEach","slide","idx","drawDimensions","fitAspectRatio","center","getCenter","limitX","length","finalX","Math","max","min","drawImage","y","requestAnimationFrame","ctx","img","Image","onload","src","clearRect","source","target","ratio"],"mappings":"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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["// 20210411232934\n// https://api.thecatapi.com/v1/images/search?limit=10\n\nexport default [\n  {\n    height: 426,\n    id: \"40g\",\n    url: \"https://cdn2.thecatapi.com/images/40g.jpg\",\n    width: 640,\n  },\n  {\n    height: 600,\n    id: \"5u8\",\n    url: \"https://cdn2.thecatapi.com/images/5u8.jpg\",\n    width: 408,\n  },\n  {\n    height: 619,\n    id: \"9h9\",\n    url: \"https://cdn2.thecatapi.com/images/9h9.jpg\",\n    width: 984,\n  },\n  {\n    height: 640,\n    id: \"a05\",\n    url: \"https://cdn2.thecatapi.com/images/a05.jpg\",\n    width: 640,\n  },\n  {\n    height: 491,\n    id: \"dkb\",\n    url: \"https://cdn2.thecatapi.com/images/dkb.jpg\",\n    width: 740,\n  },\n  {\n    height: 667,\n    id: \"MTcwMTczMg\",\n    url: \"https://cdn2.thecatapi.com/images/MTcwMTczMg.jpg\",\n    width: 500,\n  },\n  {\n    height: 683,\n    id: \"AoDtRhYcL\",\n    url: \"https://cdn2.thecatapi.com/images/AoDtRhYcL.jpg\",\n    width: 1024,\n  },\n  {\n    height: 2100,\n    id: \"MtgMsxPw9\",\n    url: \"https://cdn2.thecatapi.com/images/MtgMsxPw9.jpg\",\n    width: 1800,\n  },\n  {\n    height: 1080,\n    id: \"lP3_R8rUt\",\n    url: \"https://cdn2.thecatapi.com/images/lP3_R8rUt.jpg\",\n    width: 810,\n  },\n  {\n    height: 951,\n    id: \"pKkJjcBz_\",\n    url: \"https://cdn2.thecatapi.com/images/pKkJjcBz_.jpg\",\n    width: 1265,\n  },\n];\n","import slides from \"./slides\";\n\nconst CANVAS_ID = \"canvas-slider\";\nconst DIRECTION = {\n  Left: \"left\",\n  Right: \"right\",\n};\n\nconst $canvas = document.getElementById(CANVAS_ID);\nconst $ctx = $canvas.getContext(\"2d\");\nconst loadedImages = {};\nconst stage = {\n  height: $ctx.canvas.height,\n  width: $ctx.canvas.width,\n};\n\nlet canDrag = true;\nlet direction = \"\";\nlet dragStartX = null;\nlet dx = 0;\nlet isDragging = false;\nlet isMousePressed = false;\n\nbindMouseEvents($canvas);\ninit();\n\nfunction bindMouseEvents($el) {\n  document.addEventListener(\"mouseup\", function (event) {\n    $el.style.cursor = \"grab\";\n    dragStartX = null;\n    isDragging = false;\n    isMousePressed = false;\n    direction = \"\";\n  });\n\n  $el.addEventListener(\"mousedown\", function (event) {\n    $el.style.cursor = \"grabbing\";\n    dragStartX = event.x - dx;\n    isMousePressed = true;\n  });\n\n  document.addEventListener(\"mousemove\", function (event) {\n    if (!isMousePressed) return;\n\n    const newDx = event.x - (dragStartX ?? 0);\n    const newDirextion = dx >= newDx ? DIRECTION.Left : DIRECTION.Right;\n\n    if (newDirextion === direction && !canDrag) return;\n\n    isDragging = true;\n    direction = newDirextion;\n    dx = newDx;\n  });\n}\n\nfunction draw(t = 0) {\n  if (!t || isDragging) {\n    clearCanvas($ctx, stage);\n\n    slides.forEach((slide, idx) => {\n      const drawDimensions = fitAspectRatio(\n        { width: slide.width, height: slide.height },\n        stage\n      );\n      const center = getCenter(drawDimensions, stage);\n      const limitX = stage.width * (slides.length - 1 - idx) * -1 + center.x;\n      const x = stage.width * idx + center.x;\n      const finalX = Math.max(Math.min(x, dx + x), limitX);\n\n      if (direction === DIRECTION.Left) {\n        canDrag = finalX !== limitX;\n      } else if (direction === DIRECTION.Right) {\n        canDrag = finalX < x;\n      }\n\n      drawImage($ctx, {\n        height: drawDimensions.height,\n        id: slide.id,\n        url: slide.url,\n        width: drawDimensions.width,\n        x: finalX,\n        y: center.y,\n      });\n    });\n  }\n\n  requestAnimationFrame(draw);\n}\n\nfunction init() {\n  draw();\n}\n\nfunction drawImage(ctx, { id = \"\", url, height, width, x = 0, y = 0 }) {\n  if (!loadedImages[id]) {\n    const img = new Image();\n    img.onload = () => ctx.drawImage(img, x, y, width, height);\n    img.src = url;\n    loadedImages[id] = img;\n  } else {\n    ctx.drawImage(loadedImages[id], x, y, width, height);\n  }\n}\n\nfunction clearCanvas(ctx, { width, height }) {\n  ctx.clearRect(0, 0, width, height);\n}\n\nfunction fitAspectRatio(source, target) {\n  const ratio = Math.min(\n    target.height / source.height,\n    target.width / source.width\n  );\n\n  return {\n    height: source.height * ratio,\n    width: source.width * ratio,\n  };\n}\n\nfunction getCenter(source, stage) {\n  return {\n    x: (stage.width - source.width) / 2,\n    y: (stage.height - source.height) / 2,\n  };\n}\n"]}