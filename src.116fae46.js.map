{"version":3,"sources":["src/slides.js","src/index.js"],"names":["height","id","url","width","CANVAS_ID","DIRECTION","Left","Right","$canvas","document","getElementById","$ctx","getContext","loadedImages","stage","canvas","canDrag","direction","dragStartX","dx","isDragging","isMousePressed","bindMouseEvents","$el","addEventListener","event","style","cursor","x","newDx","newDirextion","draw","clearCanvas","forEach","slide","idx","drawDimensions","fitAspectRatio","center","getCenter","limitX","slides","length","finalX","Math","max","min","drawImage","y","requestAnimationFrame","init","ctx","img","Image","onload","src","clearRect","source","target","ratio"],"mappings":";AAGe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACb,CACEA,OAAQ,IACRC,GAAI,MACJC,IAAK,4CACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,MACJC,IAAK,4CACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,MACJC,IAAK,4CACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,MACJC,IAAK,4CACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,MACJC,IAAK,4CACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,aACJC,IAAK,mDACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,YACJC,IAAK,kDACLC,MAAO,MAET,CACEH,OAAQ,KACRC,GAAI,YACJC,IAAK,kDACLC,MAAO,MAET,CACEH,OAAQ,KACRC,GAAI,YACJC,IAAK,kDACLC,MAAO,KAET,CACEH,OAAQ,IACRC,GAAI,YACJC,IAAK,kDACLC,MAAO,OA3DI,QAAA,QAAA;;AC0Hd,aA7HD,IAAA,EAAA,EAAA,QAAA,aA6HC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA3HD,IAAMC,EAAY,gBACZC,EAAY,CAChBC,KAAM,OACNC,MAAO,SAGHC,EAAUC,SAASC,eAAeN,GAClCO,EAAOH,EAAQI,WAAW,MAC1BC,EAAe,GACfC,EAAQ,CACZd,OAAQW,EAAKI,OAAOf,OACpBG,MAAOQ,EAAKI,OAAOZ,OAGjBa,GAAU,EACVC,EAAY,GACZC,EAAa,KACbC,EAAK,EACLC,GAAa,EACbC,GAAiB,EAKrB,SAASC,EAAgBC,GACvBd,SAASe,iBAAiB,UAAW,SAAUC,GAC7CF,EAAIG,MAAMC,OAAS,OACnBT,EAAa,KACbE,GAAa,EACbC,GAAiB,EACjBJ,EAAY,KAGdM,EAAIC,iBAAiB,YAAa,SAAUC,GAC1CF,EAAIG,MAAMC,OAAS,WACnBT,EAAaO,EAAMG,EAAIT,EACvBE,GAAiB,IAGnBZ,SAASe,iBAAiB,YAAa,SAAUC,GAAO,IAAA,EAClD,GAACJ,EAAD,CAEEQ,IAAAA,EAAQJ,EAAMG,GAAmB,QAAdV,EAAAA,SAAc,IAAA,EAAA,EAAA,GACjCY,EAAeX,GAAMU,EAAQxB,EAAUC,KAAOD,EAAUE,OAE1DuB,IAAiBb,GAAcD,KAEnCI,GAAa,EACbH,EAAYa,EACZX,EAAKU,MAIT,SAASE,KAAS,UAAA,OAAA,QAAA,IAAA,UAAA,GAAA,UAAA,GAAA,KACNX,IACRY,EAAYrB,EAAMG,GAEXmB,EAAAA,QAAAA,QAAQ,SAACC,EAAOC,GACfC,IAAAA,EAAiBC,EACrB,CAAElC,MAAO+B,EAAM/B,MAAOH,OAAQkC,EAAMlC,QACpCc,GAEIwB,EAASC,EAAUH,EAAgBtB,GACnC0B,EAAS1B,EAAMX,OAASsC,EAAOC,QAAAA,OAAS,EAAIP,IAAQ,EAAIG,EAAOV,EAC/DA,EAAId,EAAMX,MAAQgC,EAAMG,EAAOV,EAC/Be,EAASC,KAAKC,IAAID,KAAKE,IAAIlB,EAAGT,EAAKS,GAAIY,GAEzCvB,IAAcZ,EAAUC,KAC1BU,EAAU2B,IAAWH,EACZvB,IAAcZ,EAAUE,QACjCS,EAAU2B,EAASf,GAGrBmB,EAAUpC,EAAM,CACdX,OAAQoC,EAAepC,OACvBC,GAAIiC,EAAMjC,GACVC,IAAKgC,EAAMhC,IACXC,MAAOiC,EAAejC,MACtByB,EAAGe,EACHK,EAAGV,EAAOU,OAKhBC,sBAAsBlB,GAGxB,SAASmB,IACPnB,IAGF,SAASgB,EAAUI,EAAoD,GAA7ClD,IAAAA,EAAAA,EAAAA,GAAAA,OAAK,IAAA,EAAA,GAAwC,EAApCC,EAAAA,EAAAA,IAAKF,EAAAA,EAAAA,OAAQG,EAAAA,EAAAA,MAAOyB,EAAAA,EAAAA,EAAAA,OAAI,IAAA,EAAA,EAAY,EAAToB,EAAAA,EAAAA,EAAAA,OAAI,IAAA,EAAA,EAAK,EACjE,GAACnC,EAAaZ,GAMhBkD,EAAIJ,UAAUlC,EAAaZ,GAAK2B,EAAGoB,EAAG7C,EAAOH,OANxB,CACfoD,IAAAA,EAAM,IAAIC,MAChBD,EAAIE,OAAS,WAAMH,OAAAA,EAAIJ,UAAUK,EAAKxB,EAAGoB,EAAG7C,EAAOH,IACnDoD,EAAIG,IAAMrD,EACVW,EAAaZ,GAAMmD,GAMvB,SAASpB,EAAYmB,EAAwB,GAAjBhD,IAAAA,EAAAA,EAAAA,MAAOH,EAAAA,EAAAA,OACjCmD,EAAIK,UAAU,EAAG,EAAGrD,EAAOH,GAG7B,SAASqC,EAAeoB,EAAQC,GACxBC,IAAAA,EAAQf,KAAKE,IACjBY,EAAO1D,OAASyD,EAAOzD,OACvB0D,EAAOvD,MAAQsD,EAAOtD,OAGjB,MAAA,CACLH,OAAQyD,EAAOzD,OAAS2D,EACxBxD,MAAOsD,EAAOtD,MAAQwD,GAI1B,SAASpB,EAAUkB,EAAQ3C,GAClB,MAAA,CACLc,GAAId,EAAMX,MAAQsD,EAAOtD,OAAS,EAClC6C,GAAIlC,EAAMd,OAASyD,EAAOzD,QAAU,GApGxCsB,EAAgBd,GAChB0C","file":"src.116fae46.js","sourceRoot":"..","sourcesContent":["// 20210411232934\n// https://api.thecatapi.com/v1/images/search?limit=10\n\nexport default [\n  {\n    height: 426,\n    id: \"40g\",\n    url: \"https://cdn2.thecatapi.com/images/40g.jpg\",\n    width: 640,\n  },\n  {\n    height: 600,\n    id: \"5u8\",\n    url: \"https://cdn2.thecatapi.com/images/5u8.jpg\",\n    width: 408,\n  },\n  {\n    height: 619,\n    id: \"9h9\",\n    url: \"https://cdn2.thecatapi.com/images/9h9.jpg\",\n    width: 984,\n  },\n  {\n    height: 640,\n    id: \"a05\",\n    url: \"https://cdn2.thecatapi.com/images/a05.jpg\",\n    width: 640,\n  },\n  {\n    height: 491,\n    id: \"dkb\",\n    url: \"https://cdn2.thecatapi.com/images/dkb.jpg\",\n    width: 740,\n  },\n  {\n    height: 667,\n    id: \"MTcwMTczMg\",\n    url: \"https://cdn2.thecatapi.com/images/MTcwMTczMg.jpg\",\n    width: 500,\n  },\n  {\n    height: 683,\n    id: \"AoDtRhYcL\",\n    url: \"https://cdn2.thecatapi.com/images/AoDtRhYcL.jpg\",\n    width: 1024,\n  },\n  {\n    height: 2100,\n    id: \"MtgMsxPw9\",\n    url: \"https://cdn2.thecatapi.com/images/MtgMsxPw9.jpg\",\n    width: 1800,\n  },\n  {\n    height: 1080,\n    id: \"lP3_R8rUt\",\n    url: \"https://cdn2.thecatapi.com/images/lP3_R8rUt.jpg\",\n    width: 810,\n  },\n  {\n    height: 951,\n    id: \"pKkJjcBz_\",\n    url: \"https://cdn2.thecatapi.com/images/pKkJjcBz_.jpg\",\n    width: 1265,\n  },\n];\n","import slides from \"./slides\";\n\nconst CANVAS_ID = \"canvas-slider\";\nconst DIRECTION = {\n  Left: \"left\",\n  Right: \"right\",\n};\n\nconst $canvas = document.getElementById(CANVAS_ID);\nconst $ctx = $canvas.getContext(\"2d\");\nconst loadedImages = {};\nconst stage = {\n  height: $ctx.canvas.height,\n  width: $ctx.canvas.width,\n};\n\nlet canDrag = true;\nlet direction = \"\";\nlet dragStartX = null;\nlet dx = 0;\nlet isDragging = false;\nlet isMousePressed = false;\n\nbindMouseEvents($canvas);\ninit();\n\nfunction bindMouseEvents($el) {\n  document.addEventListener(\"mouseup\", function (event) {\n    $el.style.cursor = \"grab\";\n    dragStartX = null;\n    isDragging = false;\n    isMousePressed = false;\n    direction = \"\";\n  });\n\n  $el.addEventListener(\"mousedown\", function (event) {\n    $el.style.cursor = \"grabbing\";\n    dragStartX = event.x - dx;\n    isMousePressed = true;\n  });\n\n  document.addEventListener(\"mousemove\", function (event) {\n    if (!isMousePressed) return;\n\n    const newDx = event.x - (dragStartX ?? 0);\n    const newDirextion = dx >= newDx ? DIRECTION.Left : DIRECTION.Right;\n\n    if (newDirextion === direction && !canDrag) return;\n\n    isDragging = true;\n    direction = newDirextion;\n    dx = newDx;\n  });\n}\n\nfunction draw(t = 0) {\n  if (!t || isDragging) {\n    clearCanvas($ctx, stage);\n\n    slides.forEach((slide, idx) => {\n      const drawDimensions = fitAspectRatio(\n        { width: slide.width, height: slide.height },\n        stage\n      );\n      const center = getCenter(drawDimensions, stage);\n      const limitX = stage.width * (slides.length - 1 - idx) * -1 + center.x;\n      const x = stage.width * idx + center.x;\n      const finalX = Math.max(Math.min(x, dx + x), limitX);\n\n      if (direction === DIRECTION.Left) {\n        canDrag = finalX !== limitX;\n      } else if (direction === DIRECTION.Right) {\n        canDrag = finalX < x;\n      }\n\n      drawImage($ctx, {\n        height: drawDimensions.height,\n        id: slide.id,\n        url: slide.url,\n        width: drawDimensions.width,\n        x: finalX,\n        y: center.y,\n      });\n    });\n  }\n\n  requestAnimationFrame(draw);\n}\n\nfunction init() {\n  draw();\n}\n\nfunction drawImage(ctx, { id = \"\", url, height, width, x = 0, y = 0 }) {\n  if (!loadedImages[id]) {\n    const img = new Image();\n    img.onload = () => ctx.drawImage(img, x, y, width, height);\n    img.src = url;\n    loadedImages[id] = img;\n  } else {\n    ctx.drawImage(loadedImages[id], x, y, width, height);\n  }\n}\n\nfunction clearCanvas(ctx, { width, height }) {\n  ctx.clearRect(0, 0, width, height);\n}\n\nfunction fitAspectRatio(source, target) {\n  const ratio = Math.min(\n    target.height / source.height,\n    target.width / source.width\n  );\n\n  return {\n    height: source.height * ratio,\n    width: source.width * ratio,\n  };\n}\n\nfunction getCenter(source, stage) {\n  return {\n    x: (stage.width - source.width) / 2,\n    y: (stage.height - source.height) / 2,\n  };\n}\n"]}